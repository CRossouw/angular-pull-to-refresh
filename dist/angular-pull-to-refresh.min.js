/**
 * angular-pull-to-refresh
 * @version v0.3.0 - 2015-11-26
 * @link https://github.com/mgcrea/angular-pull-to-refresh
 * @author Olivier Louvignes <olivier@mg-crea.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b,c){"use strict";angular.module("mgcrea.pullToRefresh",[]).constant("pullToRefreshConfig",{treshold:60,debounce:400,text:{pull:"pull to refresh",release:"release to refresh",loading:"refreshing..."},icon:{pull:"fa fa-arrow-down",release:"fa fa-arrow-up",loading:"fa fa-refresh fa-spin"}}).directive("pullToRefresh",["$compile","$timeout","$q","pullToRefreshConfig",function(b,c,d,e){return{scope:{pullToRefreshConfig:"="},restrict:"A",transclude:!0,templateUrl:"angular-pull-to-refresh.tpl.html",compile:function(b,f,g){return function(b,f,g){var h=angular.extend({},e,b.pullToRefreshConfig,g),i=f.parent(),j=a.ptr=f.children()[0];b.text=h.text,b.icon=h.icon,b.status="pull";var k=function(a){l="release"===a,b.$apply(function(){b.status=a})},l=!1;f.bind("touchmove",function(a){var b=i[0].scrollTop;b<-h.treshold&&!l?k("release"):b>-h.treshold&&l&&k("pull")}),f.bind("touchend",function(a){if(l){j.style.webkitTransitionDuration=0,j.style.margin="0 auto",k("loading");var e=+new Date;d.when(b.$eval(g.pullToRefresh)).then(function(){var a=+new Date-e;c(function(){j.style.margin="",j.style.webkitTransitionDuration="",b.status="pull"},a<h.debounce?h.debounce-a:0)})}}),b.$on("$destroy",function(){f.unbind("touchmove"),f.unbind("touchend")})}}}}]),angular.module("mgcrea.pullToRefresh").run(["$templateCache",function(a){a.put("angular-pull-to-refresh.tpl.html",'<div class="pull-to-refresh">\n  <i ng-class="icon[status]"></i>&nbsp;\n  <span ng-bind="text[status]"></span>\n</div>\n<div ng-transclude></div>\n')}])}(window,document);