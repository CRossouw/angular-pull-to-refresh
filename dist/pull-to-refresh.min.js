/**
 * ngPullToRefresh - CSS3 pull-to-refresh directive for AngularJS
 * @version v0.2.1 - 2013-06-17
 * @link 
 * @author 
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.pullToRefresh",[]).directive("pullToRefresh",["$compile","$timeout","$q",function(a,b,c){var d="<div class=\"ptr\" ng-class=\"'ptr-'+status\"><i class=\"icon-refresh\" ng-class=\"{'icon-arrow-down':status==='pull', 'icon-arrow-up':status==='release', 'icon-refresh icon-spin':status==='loading'}\"></i>&nbsp;<span class=\"ptr-message\">{{messages[status]}}</span></div>",e={debounce:400,messages:{pull:"pull to refresh",release:"release to refresh",loading:"refreshing..."}};return{restrict:"A",scope:!0,compile:function(f){f.prepend(d);var g=f.find(".pull-to-refresh");return function(d,f,h){d.$loading=!1,d.messages=e.messages,d.status="pull",b(function(){a(g)(d)}),f.bind("touchstart",function(){f[0].scrollTop});var i=!1;f.bind("touchmove",function(){var a=f[0].scrollTop;-40>a&&!i?(i=!0,d.$apply(function(){d.status="release"})):a>-40&&i&&(i=!1,d.$apply(function(){d.status="pull"}))}),f.bind("touchend",function(){f[0].scrollTop,i&&d.$apply(function(){d.$loading=!0,d.status="loading";var a=+new Date;c.when(d.$eval(h.pullToRefresh)).then(function(){var c=+new Date-a;b(function(){d.$loading=!1,d.status="pull"},c<e.debounce?e.debounce-c:0)})})}),d.$on("$destroy",function(){f.unbind("touchstart"),f.unbind("touchmove"),f.unbind("touchend")})}}}}]);